/**
 * wax - 7.0.0dev13 - v6.0.4-142-ga157a2d
 */
wax.g={};wax.g.bwdetect=function(a,c){c=c||{};var e=c.png||".png128",d=c.jpg||".jpg70";if(!a.mapTypes["mb-low"]){for(var b=a.mapTypes.mb,f={tiles:[],scheme:b.options.scheme,blankImage:b.options.blankImage,minzoom:b.minZoom,maxzoom:b.maxZoom,name:b.name,description:b.description},g=0;g<b.options.tiles.length;g++)f.tiles.push(b.options.tiles[g].replace(".png",e).replace(".jpg",d));m.mapTypes.set("mb-low",new wax.g.connector(f))}return wax.bwdetect(c,function(c){a.setMapTypeId(c?"mb":"mb-low")})};wax.g.interaction=function(){function a(){e=!0}var c,e=!1,d,b=null,f=null;return wax.interaction().attach(function(c){if(!arguments.length)return d;d=c;f=google.maps.event.addListener(d,"idle",a);b=google.maps.event.addListener(d,"tileloaded",a)}).detach(function(){b&&google.maps.event.removeListener(b);f&&google.maps.event.removeListener(f)}).parent(function(){return d.getDiv()}).grid(function(){if(e||!c){wax.u.offset(d.getDiv());var a=d.getZoom();c=[];var b=function(b){if(b.interactive)for(var d in b.cache)if(d.split("/")[0]==a){var e=wax.u.offset(b.cache[d]);c.push([e.top,e.left,b.cache[d]])}},f;for(f in d.mapTypes)b(d.mapTypes[f]);d.overlayMapTypes.forEach(b)}return c})};wax.g.connector=function(a){a=a||{};this.options={tiles:a.tiles,scheme:a.scheme||"xyz",blankImage:a.blankImage||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};this.minZoom=a.minzoom||0;this.maxZoom=a.maxzoom||22;this.name=a.name||"";this.description=a.description||"";this.interactive=!0;this.tileSize=new google.maps.Size(256,256);this.cache={}};wax.g.connector.prototype.getTile=function(a,c){var e=c+"/"+a.x+"/"+a.y;if(!this.cache[e]){var d=this.cache[e]=new Image(256,256);this.cache[e].src=this.getTileUrl(a,c);this.cache[e].setAttribute("gTileKey",e);this.cache[e].onerror=function(){d.style.display="none"}}return this.cache[e]};wax.g.connector.prototype.releaseTile=function(a){var c=a.getAttribute("gTileKey");this.cache[c]&&delete this.cache[c];a.parentNode&&a.parentNode.removeChild(a)};wax.g.connector.prototype.getTileUrl=function(a,c){var e=Math.pow(2,c),d="tms"===this.options.scheme?e-1-a.y:a.y,b=a.x%e,b=0>b?a.x%e+e:b;return 0>d?this.options.blankImage:this.options.tiles[parseInt(b+d,10)%this.options.tiles.length].replace(/\{z\}/g,c).replace(/\{x\}/g,b).replace(/\{y\}/g,d)};